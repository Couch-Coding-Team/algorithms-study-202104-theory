# 힙(Heap)

## 0. Overview

- 큐 라는 이름을 갖고 있지만 사실상 큐와는 약간 다른 동작을 하게 된다. 응급실에 비유하면 이해가 쉽다

- 들어간 순서에 상관없이 우선순위가 높은 데이터가 먼저 나온다

- 우선순위라 함은 별도의 정수 정보를 가져도 되지만 알파벳 순, 오름차순과 같이 데이터 그 자체에 우선순위가 내포될 수 있다

- 배열, 노드, 힙을 통해서 구현할 수 있다. 하지만 대부분의 경우는 힙으로 구현을 한다

- 배열을 사용하지 않는 이유 : 데이터를 삽입, 삭제하는 과정에서 한 칸씩 당기거나 미는 연산의 횟수가 늘어난다, 삽입의 위치를 찾기 위해서 저장된 모든 데이터와 우선순위를 비교할 수 있다

- heap : 무엇인가를 차곡차곡 쌓아올린 더미

- - 완전 이진트리로 구현해야한다
  - 루트 노드의 우선순위가 가장 크면 max heap
  - 루트 노드의 우선순위가 가장 작으면 min heap

- 힙은 완전 이진트리 이므로 데이터의 수가 두 배 늘 때마다 비교연산의 횟수는 1회 증가한다



## 1. insert 동작에 관하여(min heap을 예시로)

1) 새로운 데이터를 마지막 위치에 일단 저장한다

2) 부모노드와 비교하여 우선순위가 더 높다면 올라가고, 낮으면 멈춘다(반복)

 

## 2. delete 동작에 관하여(min heap을 예시로)

삭제라 함은 우선순위가 가장 높은 데이터를 반환하는 것이므로 루트노드를 삭제하는 것 부터 시작됨을 짐작할 수 있다

1) 루트노드를 반환한 뒤에 삭제한다

2) 마지막 위치의 노드를 루트노드로 위치시킨다

3) 자식 노드들중 우선순위가 높은 노드를 알아낸다

4) 에서 알아낸 노드와 우선순위 값을 비교하여 우선순위가 더 높다면 멈추고, 낮으면 내려간다(반복)



## 3. 배열 기반 힙의 구현

- 일전에 트리는 노드로 구현을 하였는데, 이렇게 되면 힙의 마지막 위치에 데이터를 추가하는 것이 어려워진다. 그러므로 배열을 기반으로 구현하는 것이 더 좋다.

- 힙에 저장된 노드의 갯수와 마지막 노드의 고유번호(=인덱스 값)는 일치한다

- 노드에 고유의 번호를 부여하고 그 번호는 배열의     인덱스 값이 된다. 이때 편의상 인덱스 0은 사용하지 않고 1부터 사용한다

- - left child 노드의 인덱스 값 = 부모 노드의 인덱스 값*2
  - right child 노드의 인덱스 값 = 부모 노드의 인덱스 값*2+1
  - 부모 노드의 인덱스 값 = 자식 노드의 인덱스 값 // 2

- 자식 노드들중 우선순위가 높은 노드의 인덱스를 알아내는 함수에 관하여

- - 자식 노드가 없다면 0을 반환한다
  - 단말 노드라면 left child만 있는 경우이므로, 왼쪽 자식의 인덱스를 반환한다
  - 위의 두 가지 모두가 아니라면 left child, right child의 우선순위를 비교하여 더 높은 녀석의 인덱스를 반환한다